<script>
  // Function to fetch and display responses
  function fetchResponses() {
  fetch('https://power-flax-syzygy.glitch.me/responses', {  // Use the correct Glitch project URL here
    method: 'GET',
    credentials: 'include'  // If you need cookies or credentials
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Failed to fetch responses');
    }
    return response.json();
  })
  .then(data => displayResponses(data))
  .catch(error => {
    console.error('Error fetching responses:', error);
    alert('Failed to load responses. Please try again later.');
  });
}

  // Function to display the responses on the Wall of Fame
  function displayResponses(responses) {
    const responsesContainer = document.getElementById('responses');
    responsesContainer.innerHTML = ''; // Clear any existing content

    responses.forEach(response => {
      const responseDiv = document.createElement('div');
      responseDiv.classList.add('response');

      const headlineDiv = document.createElement('div');
      headlineDiv.classList.add('headline');
      headlineDiv.innerHTML = `${response.nickname} <br> ${response.type}, ${response.generation}`;
      responseDiv.appendChild(headlineDiv);

      const bodyDiv = document.createElement('div');
      bodyDiv.classList.add('response-body');
      bodyDiv.innerHTML = `<p><strong>Felt: </strong>${response.observed}</p>
                           <p><strong>Because: </strong>${response.reason}</p>
                           <p>${response.reflection}</p>`;
      responseDiv.appendChild(bodyDiv);

      const dateTimeDiv = document.createElement('div');
      dateTimeDiv.classList.add('date-time');
      dateTimeDiv.textContent = new Date(response.timestamp).toLocaleString();
      responseDiv.appendChild(dateTimeDiv);

      responsesContainer.appendChild(responseDiv);
    });
  }

  // Call the function to fetch and display the responses when the page loads
  fetchResponses();
</script>
